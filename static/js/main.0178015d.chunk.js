(this["webpackJsonpgoit-react-hw-09-hoks"]=this["webpackJsonpgoit-react-hw-09-hoks"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),u=n(46),i=n(47),l=n(49),s=n(48),b=n(6),O=n(14),f=n(12),j=(n(24),"/"),d="/login",m="/registration",g="/contacts",p="/logout",E=n(16),h=n(109),k=n(25);var v=Object(E.b)((function(e){return{user:Object(k.d)(e)}}),null)((function(e){var t=e.user;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(O.a,{variant:"tabs",defaultActiveKey:"/home",className:"justify-content-end"},c.a.createElement(O.a.Link,{eventKey:"disabled",disabled:!0},"Hello ",t.name),c.a.createElement(O.a.Link,{eventKey:"disabled",disabled:!0},"Email: ",t.email),c.a.createElement(O.a.Item,null,c.a.createElement(f.b,{to:p,className:"nav-link"},"Log out")),c.a.createElement(O.a.Item,null,c.a.createElement(f.b,{to:g,className:"nav-link"},"Contacts"))):c.a.createElement(h.a,{animation:"border"}))})),y=function(e){return e.status.logOn};var B=function(e){return e.user,c.a.createElement(O.a,{variant:"tabs",defaultActiveKey:"/home",className:"justify-content-end"},c.a.createElement(O.a.Item,null,c.a.createElement(f.b,{to:d,className:"nav-link"},"Login")),c.a.createElement(O.a.Item,null,c.a.createElement(f.b,{to:m,className:"nav-link"},"Registration")))};var T=Object(E.b)((function(e){return{logOn:y(e)}}),null)((function(e){var t=e.logOn;return e.props,c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{variant:"tabs",defaultActiveKey:"/home",className:"justify-content-end"},c.a.createElement(O.a.Item,null,c.a.createElement(f.b,{to:j,className:"nav-link"},"Home Page")),t?c.a.createElement(v,null):c.a.createElement(B,null)))})),S=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement(T,null),c.a.createElement("main",null,t))},R=n(45),q=n(3),N=n(34),z=Object(E.b)((function(e){return{logOn:y(e)}}),null)((function(e){var t=e.component,n=e.logOn,r=e.redirectTo,a=Object(N.a)(e,["component","logOn","redirectTo"]);return c.a.createElement(b.b,Object.assign({},a,{render:function(e){return n&&a.restricted?c.a.createElement(b.a,{to:r}):c.a.createElement(t,e)}}))})),U=Object(E.b)((function(e){return{logOn:y(e)}}))((function(e){var t=e.component,n=e.logOn,r=e.redirectTo,a=Object(N.a)(e,["component","logOn","redirectTo"]);return c.a.createElement(b.b,Object.assign({},a,{render:function(e){return n?c.a.createElement(t,e):c.a.createElement(b.a,{to:r})}}))})),w=n(110);var A,I,L=function(e){var t=e.error;return c.a.createElement(w.a,{variant:"danger"},c.a.createElement(w.a.Heading,null,"Samsing wrong!"),c.a.createElement("p",null,t))},C=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,244))})),F=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,245))})),H=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,246))})),K=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,247))})),_=Object(r.lazy)((function(){return Promise.all([n.e(2),n.e(10)]).then(n.bind(null,252))})),M=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(9)]).then(n.bind(null,250))})),x=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.getUser(this.props.token)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.message)return setTimeout((function(){e.props.registrationError(null)}),3e3)}},{key:"render",value:function(){var e=this.props,t=e.logOn,n=e.message;return c.a.createElement(c.a.Fragment,null,c.a.createElement(S,null,c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,c.a.createElement(h.a,{animation:"border"}))},c.a.createElement(b.d,null,c.a.createElement(b.b,{path:j,exact:!0,component:t?F:C}),c.a.createElement(z,{path:j,exact:!0,restricted:!0,redirectTo:g,component:t?F:C}),c.a.createElement(z,{path:d,restricted:!0,redirectTo:j,component:H}),c.a.createElement(z,{path:m,restricted:!0,redirectTo:j,component:K}),c.a.createElement(U,{path:g,redirectTo:d,component:_}),c.a.createElement(U,{path:p,redirectTo:d,component:M}),c.a.createElement(b.a,{to:j})))),n&&c.a.createElement(L,{error:n}))}}]),n}(r.Component),G={getUser:R.c,registrationError:q.q},P=Object(E.b)((function(e){return{token:Object(k.e)(e),logOn:y(e),message:Object(k.b)(e)}}),G)(x),D=n(74),J=n(27),Q=n(5),V=n(20),W=n(44),X=n.n(W),Y=n(7),Z=n(4),$={user:null,token:null,contacts:[],error:null,filter:""},ee=Object(Q.c)({user:null,token:null,contacts:[],error:null,filter:""},(A={},Object(Y.a)(A,q.s,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),t.payload)})),Object(Y.a)(A,q.q,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{error:t.payload})})),Object(Y.a)(A,q.m,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),t.payload)})),Object(Y.a)(A,q.k,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{error:t.payload})})),Object(Y.a)(A,q.j,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{user:t.payload})})),Object(Y.a)(A,q.h,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),t.payload)})),Object(Y.a)(A,q.p,(function(){return Object(Z.a)({},$)})),Object(Y.a)(A,q.n,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{error:t.payload})})),Object(Y.a)(A,q.c,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{contacts:[].concat(Object(J.a)(e.contacts),[t.payload])})})),Object(Y.a)(A,q.f,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{contacts:t.payload})})),Object(Y.a)(A,q.a,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{error:t.payload})})),Object(Y.a)(A,q.d,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{error:t.payload})})),Object(Y.a)(A,q.v,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{contacts:Object(J.a)(e.contacts.filter((function(e){return e.id!==t.payload})))})})),Object(Y.a)(A,q.t,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{error:t.payload})})),Object(Y.a)(A,q.g,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{filter:t.payload})})),A)),te=n(21),ne=Object(Q.c)({logOn:!1,remember:!1},(I={},Object(Y.a)(I,te.a,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{logOn:t.payload})})),Object(Y.a)(I,te.b,(function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{remember:t.payload})})),I)),re={key:"userBook",storage:X.a,whitelist:["token"]},ce={key:"status",storage:X.a,whitelist:["remember"]},ae=Object(Q.a)({reducer:{userBook:Object(V.g)(re,ee),status:Object(V.g)(ce,ne)},middleware:Object(J.a)(Object(Q.d)({serializableCheck:{ignoredActions:[V.a,V.f,V.b,V.c,V.d,V.e]}}))}),oe=Object(V.h)(ae);o.a.render(c.a.createElement(f.a,null,c.a.createElement(E.a,{store:ae},c.a.createElement(D.a,{loading:c.a.createElement(h.a,{animation:"border"}),persistor:oe},c.a.createElement(P,null)))),document.getElementById("root"))},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a}));var r=n(5),c=Object(r.b)("CHENGE_STATUS_LOGON"),a=Object(r.b)("CHENGE_STATUS_REMEMBER")},25:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=function(e){return e.userBook.token},c=function(e){return e.userBook.user},a=function(e){return e.userBook.contacts},o=function(e){return e.userBook.filter},u=function(e){return e.userBook.error}},3:function(e,t,n){"use strict";n.d(t,"r",(function(){return c})),n.d(t,"s",(function(){return a})),n.d(t,"q",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return b})),n.d(t,"h",(function(){return O})),n.d(t,"o",(function(){return f})),n.d(t,"p",(function(){return j})),n.d(t,"n",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return k})),n.d(t,"u",(function(){return v})),n.d(t,"v",(function(){return y})),n.d(t,"t",(function(){return B})),n.d(t,"g",(function(){return T}));var r=n(5),c=Object(r.b)("userBook/registrationRequest"),a=Object(r.b)("userBook/registrationSuccess"),o=Object(r.b)("userBook/registrationError"),u=Object(r.b)("userBook/loginRequest"),i=Object(r.b)("userBook/loginSuccess"),l=Object(r.b)("userBook/loginError"),s=Object(r.b)("userBook/getUserRequest"),b=Object(r.b)("userBook/getUserSuccess"),O=Object(r.b)("userBook/getUserError"),f=Object(r.b)("userBook/logoutRequest"),j=Object(r.b)("userBook/logoutSuccess"),d=Object(r.b)("userBook/logoutError"),m=Object(r.b)("userBook/addRequest"),g=Object(r.b)("userBook/addSuccess"),p=Object(r.b)("userBook/addError"),E=Object(r.b)("contacts/getRequest"),h=Object(r.b)("contacts/getSuccess"),k=Object(r.b)("contacts/getError"),v=Object(r.b)("contacts/removeRequest"),y=Object(r.b)("contacts/removeSuccess"),B=Object(r.b)("contacts/removeError"),T=Object(r.b)("FILTER_ITEM")},45:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return j})),n.d(t,"g",(function(){return d}));var r=n(4),c=n(3),a=n(21),o=n(18),u=n.n(o);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(e){return u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(e){return function(t){t(Object(c.r)()),u.a.post("/users/signup",e).then((function(e){i(e.data.token),t(Object(a.a)(!0)),t(Object(c.s)(Object(r.a)({},e.data)))})).catch((function(e){return t(Object(c.q)(e.message))}))}},s=function(e){return function(t){t(Object(c.l)()),u.a.post("/users/login",e).then((function(e){i(e.data.token),t(Object(a.a)(!0)),t(Object(c.m)(Object(r.a)({},e.data)))})).catch((function(e){return t(Object(c.k)(e.message))}))}},b=function(e){return function(t){e?(i(e),t(Object(a.a)(!0)),t(Object(c.i)()),u.a.get("/users/current").then((function(e){t(Object(c.j)(Object(r.a)({},e.data)))})).catch((function(e){return t(Object(c.h)(e.message))}))):t(Object(a.a)(!1))}},O=function(){return function(e){e(Object(c.o)()),u.a.post("/users/logout").then((function(){u.a.defaults.headers.common.Authorization="",e(Object(a.a)(!1)),e(Object(c.p)())})).catch((function(t){return e(Object(c.n)(t.message))}))}},f=function(e){return function(t){t(Object(c.b)()),u.a.post("/contacts",e).then((function(e){var n=e.data;t(Object(c.c)(n))})).catch((function(e){return t(Object(c.a)(e.message))}))}},j=function(e){return function(t){e&&(i(e),t(Object(c.e)()),u.a.get("/contacts").then((function(e){t(Object(c.f)(e.data))})).catch((function(e){return t(Object(c.d)(e.message))})))}},d=function(e){return function(t){t(Object(c.u)()),u.a.delete("/contacts/".concat(e)).then((function(){t(Object(c.v)(e))})).catch((function(e){return t(Object(c.t)(e.message))}))}}},77:function(e,t,n){e.exports=n(107)}},[[77,1,3]]]);
//# sourceMappingURL=main.0178015d.chunk.js.map