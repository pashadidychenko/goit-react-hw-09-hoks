(this["webpackJsonpgoit-react-hw-09-hoks"]=this["webpackJsonpgoit-react-hw-09-hoks"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(21),o=n.n(a),u=n(47),i=n(7),l=n(13),b=n(11),s=(n(23),"/"),O="/login",f="/registration",j="/contacts",d="/logout",m=n(15),E=n(105),g=n(24);var p=Object(m.b)((function(e){return{user:Object(g.d)(e)}}),null)((function(e){var t=e.user;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(l.a,{variant:"tabs",defaultActiveKey:"/home",className:"justify-content-end"},c.a.createElement(l.a.Link,{eventKey:"disabled",disabled:!0},"Hello ",t.name),c.a.createElement(l.a.Link,{eventKey:"disabled",disabled:!0},"Email: ",t.email),c.a.createElement(l.a.Item,null,c.a.createElement(b.b,{to:d,className:"nav-link"},"Log out")),c.a.createElement(l.a.Item,null,c.a.createElement(b.b,{to:j,className:"nav-link"},"Contacts"))):c.a.createElement(E.a,{animation:"border"}))})),k=function(e){return e.status.logOn},h=function(e){return e.status.remember};var v=function(){return c.a.createElement(l.a,{variant:"tabs",defaultActiveKey:"/home",className:"justify-content-end"},c.a.createElement(l.a.Item,null,c.a.createElement(b.b,{to:O,className:"nav-link"},"Login")),c.a.createElement(l.a.Item,null,c.a.createElement(b.b,{to:f,className:"nav-link"},"Registration")))};var y=Object(m.b)((function(e){return{logOn:k(e)}}),null)((function(e){var t=e.logOn;return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{variant:"tabs",defaultActiveKey:"/home",className:"justify-content-end"},c.a.createElement(l.a.Item,null,c.a.createElement(b.b,{to:s,className:"nav-link"},"Home Page")),t?c.a.createElement(p,null):c.a.createElement(v,null)))})),B=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,null),c.a.createElement("main",null,t))},T=n(45),S=n(3),R=n(35),q=Object(m.b)((function(e){return{logOn:k(e)}}),null)((function(e){var t=e.component,n=e.logOn,r=e.redirectTo,a=Object(R.a)(e,["component","logOn","redirectTo"]);return c.a.createElement(i.b,Object.assign({},a,{render:function(e){return n&&a.restricted?c.a.createElement(i.a,{to:r}):c.a.createElement(t,e)}}))})),N=Object(m.b)((function(e){return{logOn:k(e)}}))((function(e){var t=e.component,n=e.logOn,r=e.redirectTo,a=Object(R.a)(e,["component","logOn","redirectTo"]);return c.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?c.a.createElement(t,e):c.a.createElement(i.a,{to:r})}}))})),w=n(106);var z=function(e){var t=e.error;return c.a.createElement(w.a,{variant:"danger"},c.a.createElement(w.a.Heading,null,"Samsing wrong!"),c.a.createElement("p",null,t))},I=n(107),U=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,241))})),A=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,242))})),L=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,243))})),F=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,244))})),H=Object(r.lazy)((function(){return Promise.all([n.e(2),n.e(10)]).then(n.bind(null,249))})),K=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(9)]).then(n.bind(null,247))}));var _,x,C={getUser:T.c,registrationError:S.q,setToken:S.w},G=Object(m.b)((function(e){return{token:Object(g.e)(e),logOn:k(e),message:Object(g.b)(e),remember:h(e)}}),C)((function(e){var t=e.logOn,n=e.message,a=e.getUser,o=e.token,l=e.registrationError,b=e.setToken,m=e.remember,g=Object(I.a)("token"),p=Object(u.a)(g,2),k=p[0],h=p[1];return Object(r.useEffect)((function(){b(k),a(k)}),[a,k,b]),Object(r.useEffect)((function(){m&&h(o)}),[o,h,m]),Object(r.useEffect)((function(){n&&setTimeout((function(){l(null)}),3e3)})),c.a.createElement(c.a.Fragment,null,c.a.createElement(B,null,c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null,c.a.createElement(E.a,{animation:"border"}))},c.a.createElement(i.d,null,c.a.createElement(i.b,{path:s,exact:!0,component:t?A:U}),c.a.createElement(q,{path:s,exact:!0,restricted:!0,redirectTo:j,component:t?A:U}),c.a.createElement(q,{path:O,restricted:!0,redirectTo:s,component:L}),c.a.createElement(q,{path:f,restricted:!0,redirectTo:s,component:F}),c.a.createElement(N,{path:j,redirectTo:O,component:H}),c.a.createElement(N,{path:d,redirectTo:O,component:K}),c.a.createElement(i.a,{to:s})))),n&&c.a.createElement(z,{error:n}))})),M=n(27),P=n(5),J=n(6),D=n(4),Q={user:null,token:null,contacts:[],error:null,filter:""},V=Object(P.c)({user:null,token:null,contacts:[],error:null,filter:""},(_={},Object(J.a)(_,S.s,(function(e,t){return Object(D.a)(Object(D.a)({},e),t.payload)})),Object(J.a)(_,S.q,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.m,(function(e,t){return Object(D.a)(Object(D.a)({},e),t.payload)})),Object(J.a)(_,S.k,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.j,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{user:t.payload})})),Object(J.a)(_,S.h,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.p,(function(e,t){return Object(D.a)(Object(D.a)({},Q),{},{token:t.payload})})),Object(J.a)(_,S.n,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.c,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{contacts:[].concat(Object(M.a)(e.contacts),[t.payload])})})),Object(J.a)(_,S.f,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{contacts:t.payload})})),Object(J.a)(_,S.a,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.d,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.v,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{contacts:Object(M.a)(e.contacts.filter((function(e){return e.id!==t.payload})))})})),Object(J.a)(_,S.t,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{error:t.payload})})),Object(J.a)(_,S.g,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{filter:t.payload})})),Object(J.a)(_,S.w,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{token:t.payload})})),_)),W=n(20),X=Object(P.c)({logOn:!1,remember:!1},(x={},Object(J.a)(x,W.a,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{logOn:t.payload})})),Object(J.a)(x,W.b,(function(e,t){return Object(D.a)(Object(D.a)({},e),{},{remember:t.payload})})),x)),Y=Object(P.a)({reducer:{userBook:V,status:X},middleware:Object(M.a)(Object(P.d)())});o.a.render(c.a.createElement(b.a,null,c.a.createElement(m.a,{store:Y},c.a.createElement(G,null))),document.getElementById("root"))},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a}));var r=n(5),c=Object(r.b)("CHENGE_STATUS_LOGON"),a=Object(r.b)("CHENGE_STATUS_REMEMBER")},24:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=function(e){return e.userBook.token},c=function(e){return e.userBook.user},a=function(e){return e.userBook.contacts},o=function(e){return e.userBook.filter},u=function(e){return e.userBook.error}},3:function(e,t,n){"use strict";n.d(t,"r",(function(){return c})),n.d(t,"s",(function(){return a})),n.d(t,"q",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return s})),n.d(t,"h",(function(){return O})),n.d(t,"o",(function(){return f})),n.d(t,"p",(function(){return j})),n.d(t,"n",(function(){return d})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"u",(function(){return y})),n.d(t,"v",(function(){return B})),n.d(t,"t",(function(){return T})),n.d(t,"g",(function(){return S})),n.d(t,"w",(function(){return m}));var r=n(5),c=Object(r.b)("userBook/registrationRequest"),a=Object(r.b)("userBook/registrationSuccess"),o=Object(r.b)("userBook/registrationError"),u=Object(r.b)("userBook/loginRequest"),i=Object(r.b)("userBook/loginSuccess"),l=Object(r.b)("userBook/loginError"),b=Object(r.b)("userBook/getUserRequest"),s=Object(r.b)("userBook/getUserSuccess"),O=Object(r.b)("userBook/getUserError"),f=Object(r.b)("userBook/logoutRequest"),j=Object(r.b)("userBook/logoutSuccess"),d=Object(r.b)("userBook/logoutError"),m=Object(r.b)("userBook/setToken"),E=Object(r.b)("userBook/addRequest"),g=Object(r.b)("userBook/addSuccess"),p=Object(r.b)("userBook/addError"),k=Object(r.b)("contacts/getRequest"),h=Object(r.b)("contacts/getSuccess"),v=Object(r.b)("contacts/getError"),y=Object(r.b)("contacts/removeRequest"),B=Object(r.b)("contacts/removeSuccess"),T=Object(r.b)("contacts/removeError"),S=Object(r.b)("FILTER_ITEM")},45:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return j})),n.d(t,"g",(function(){return d}));var r=n(4),c=n(3),a=n(20),o=n(18),u=n.n(o);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(e){return u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(e){return function(t){t(Object(c.r)()),u.a.post("/users/signup",e).then((function(e){i(e.data.token),t(Object(a.a)(!0)),t(Object(c.s)(Object(r.a)({},e.data)))})).catch((function(e){return t(Object(c.q)(e.message))}))}},b=function(e){return function(t){t(Object(c.l)()),u.a.post("/users/login",e).then((function(e){i(e.data.token),t(Object(a.a)(!0)),t(Object(c.m)(Object(r.a)({},e.data)))})).catch((function(e){return t(Object(c.k)(e.message))}))}},s=function(e){return function(t){e?(i(e),t(Object(a.a)(!0)),t(Object(c.i)()),u.a.get("/users/current").then((function(e){t(Object(c.j)(Object(r.a)({},e.data)))})).catch((function(e){return t(Object(c.h)(e.message))}))):t(Object(a.a)(!1))}},O=function(){return function(e){e(Object(c.o)()),u.a.post("/users/logout").then((function(){u.a.defaults.headers.common.Authorization="",e(Object(a.a)(!1)),e(Object(a.b)(!1)),e(Object(c.p)(null))})).catch((function(t){return e(Object(c.n)(t.message))}))}},f=function(e){return function(t){t(Object(c.b)()),u.a.post("/contacts",e).then((function(e){var n=e.data;t(Object(c.c)(n))})).catch((function(e){return t(Object(c.a)(e.message))}))}},j=function(e){return function(t){e&&(i(e),t(Object(c.e)()),u.a.get("/contacts").then((function(e){t(Object(c.f)(e.data))})).catch((function(e){return t(Object(c.d)(e.message))})))}},d=function(e){return function(t){t(Object(c.u)()),u.a.delete("/contacts/".concat(e)).then((function(){t(Object(c.v)(e))})).catch((function(e){return t(Object(c.t)(e.message))}))}}},74:function(e,t,n){e.exports=n(102)}},[[74,1,3]]]);
//# sourceMappingURL=main.5b36c8bd.chunk.js.map